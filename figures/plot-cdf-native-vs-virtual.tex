\begin{figure}[!htb]
\begin{center}

\begin{tikzpicture}

\begin{axis}[name=plot1, height=\figheightVOCDF, width=\figwidthVOCDF, ymin=0, ymax=1, xmin=0, 
		legend pos=south east,
		xlabel=latency ($\mu{}s$), 
		ylabel=probability, 
		title style={yshift=-2ex},
		title=load: \mthreadops{},
		]
	\addplot [very thick, blue, dashed] table[x=Latency,y=Probability] {./figures/native_threadops_cdf.dat};	
	\addplot [thick, red] table[x=Latency,y=Probability] {./figures/virt_threadops_10k_cdf.dat};
	\legend {\small{native (avg 5, max 12.4)}, \small{virtual (avg 16.4, max 169.1)}}
\end{axis}
%%%%%%%%%%%%%%%%%%for defense presentation%%%%%%%%%%%%%%%%%%%%
\ifdefense

\end{tikzpicture}
\end{center}
\label{plot-cdf-native-vs-virtual1}
\end{figure}
	
\begin{figure}[!htb]
\begin{center}
\begin{tikzpicture}

\fi
%%%%%%%%%%%%%%%%%%%%%ENDIF%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{axis}[name=plot2, \atCmdVOCDFLowerPlotA, height=\figheightVOCDF, width=\figwidthVOCDF, ymin=0, ymax=1, xmin=0, 
		legend pos=south east,
		xlabel=latency ($\mu{}s$), 
		ylabel=probability, 
		title style={yshift=-2ex},
		title=load: \mforkops{},
		]
	\addplot [very thick, blue, dashed] table[x=Latency,y=Probability] {./figures/native_forkops_10k_cdf.dat};	
	\addplot [thick, red] table[x=Latency,y=Probability] {./figures/virt_forkops2_10k_cdf.dat};
	\legend {\small{native (avg 6.1, max 25.9)}, \small{virtual (avg 12.6, max 119.5)}}
\end{axis}

%%%%%%%%%%%%%%%%%%for defense presentation%%%%%%%%%%%%%%%%%%%%
\ifdefense

\end{tikzpicture}
\end{center}
\label{plot-cdf-native-vs-virtual2}
\end{figure}
	
\begin{figure}[!htb]
\begin{center}
\begin{tikzpicture}

\fi
%%%%%%%%%%%%%%%%%%%%%ENDIF%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{axis}[name=plot3, \atCmdVOCDFLowerPlotB, height=\figheightVOCDF, width=\figwidthVOCDF, ymin=0, ymax=1, xmin=0, 		
		xlabel=latency ($\mu{}s$), 
		ylabel=probability,
		title style={yshift=-2ex},
		legend pos=south east,
		title=load: \mcachepressure{},
		]
	\addplot [very thick, blue, dashed] table[x=Latency,y=Probability] {./figures/native_cachepressure_10k_cdf.dat};
	\addplot [thick, red] table[x=Latency,y=Probability] {./figures/virt_cachepressure_10k_cdf.dat};
	\legend {\small{native (avg 43.1, max 73.7)}, \small{virtual (avg 18.2, max 131.2)}}
\end{axis}

\end{tikzpicture}
\end{center}
\ifreport
\caption{Comparison of interrupt latency CDF between native and virtual setup for different load conditions}
\label{plot-cdf-native-vs-virtual}
\else
\label{plot-cdf-native-vs-virtual3}
\fi
\end{figure}
